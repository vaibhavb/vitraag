
<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link href="https://fonts.googleapis.com/css?family=Lato:400,700" rel="stylesheet">
<link href="https://fonts.googleapis.com/css?family=Inconsolata:400,700" rel="stylesheet">
<link rel="stylesheet" href="https://www.vitraag.com//assets/css/mybulma.css">
<script defer src="https://use.fontawesome.com/releases/v5.6.0/js/all.js"></script>

    <title>Classifying Android Malware Applications with Machine Learning</title>
  </head>
<body>

<!---------------------------------------------------->  
<!--               Navbar Section                   -->  
<!---------------------------------------------------->  
<nav class="navbar is-link is-fixed-top" role="navigation" aria-label="main navigation">
  <div class="container is-fluid">
    <div class="navbar-brand">
        <!--
          <a class="navbar-item" href="https://www.vitraag.com/">
              <i class="fas fa-home fa-3x"></i>&nbsp;&nbsp;
              <title class="navbar-item" href="https://www.vitraag.com/">Vaibhav Bhandari</title>
          </a>
        -->
        <a class="navbar-burger" data-target="navMenu" role="button" aria-label="menu" aria-expanded="false">
            <span></span>
            <span></span>
            <span></span>
        </a>
    </div>
        <div class="navbar-menu" id="navMenu" >
          <div class="navbar-end">
            <a class="navbar-item" href="https://www.vitraag.com/#about">
              <span class="icon">
                <i class="fas fa-info"></i>
              </span>
              <span>About</span>
            </a>
            <a class="navbar-item" href="https://www.vitraag.com/#portfolio">
                <span class="icon">
                  <i class="fas fa-th-list"></i>
                </span>
                <span>Portfolio</span>
            </a>
            <div class="navbar-item has-dropdown is-hoverable">
              <a class="navbar-link">Blog</a>
              <div class="navbar-dropdown">
                <a href="/#blog" class="navbar-item">Posts By Category&nbsp;<span class="tag is-info">Blogs!</span></a>
                <a href="/posts-by-year" class="navbar-item">Posts By Year&nbsp;<span class="tag is-info">Blogs!</span></a>
              
                <a href="/projects-by-year" class="navbar-item">Projects By Year&nbsp;<span class="tag is-danger">New!</span></a>
                <a href="/travels" class="navbar-item">Travels By Year&nbsp;<span class="tag is-danger">New!</span></a>
              </div>
            </div>
            <div class="navbar-item has-dropdown is-hoverable">
              <a class="navbar-link">Pages</a>
              <div class="navbar-dropdown">
                <a href="https://www.vitraag.com/#ethics" class="navbar-item">       
                  <span class="icon">
                    <i class="fas fa-balance-scale"></i>
                  </span>
                  <span>Ethics&nbsp;</span>
                  <span class="tag is-primary">Life</span>
                </a>
                <a href="/kamal" class="navbar-item">2022 Moms Gratitude Ceremony&nbsp;<span class="tag is-primary">Family</span></a>
                <a href="/posts-by-year" class="navbar-item">Posts By Year&nbsp;<span class="tag is-info">Blogs!</span></a>
                <a href="/recipes" class="navbar-item">Family Recipes&nbsp;<span class="tag is-info">New!</span></a>
                <a href="https://vitraag.notion.site/Vaibhav-s-Public-Notion-Landing-Page-c24d42742ebc43d28ce2e22d41c3ba11" target="_blank" class="navbar-item">Notion &nbsp;<span class="tag is-info">Wiki</span></a>
                <a href="/notes/cats/" class="navbar-item">Second Brain&nbsp;<span class="tag is-info">Memory!</span></a>
                <a href="/test-todo-app/" class="navbar-item">Todo App</a>
                <a href="/me/" class="navbar-item">Me (Visual)</a>
              </div>
            </div>
            <div class="navbar-item has-dropdown is-hoverable">
              <a class="navbar-link">Projects</a>
              <div class="navbar-dropdown">
                <a href="https://www.cyberdefendersprogram.com" class="navbar-item" target="_blank">Cyber Defenders&nbsp;<span class="tag is-primary">Non-Profit</span></a>
                <a href="https://www.lib13.com" class="navbar-item" target="_blank">Lib13 &nbsp;<span class="tag is-primary">Inc</span></a>
                <a href="/digitalhealthconcierge" class="navbar-item">Digital Concierge&nbsp;<span class="tag is-info">Community!</span></a>
                <a href="/code/lira" class="navbar-item">Project Lira&nbsp;<span class="tag is-info">Code!</span></a>
                <a href="https://www.wisevoter.org" target="_blank" class="navbar-item">WiseVoter&nbsp;<span class="tag is-danger">Non-Profit!</span></a>
                <a href="/art" class="navbar-item">Art Work&nbsp;<span class="tag is-info">New!</span></a>
                <a href="/projects-by-year" class="navbar-item">Projects By Year&nbsp;<span class="tag is-danger">New!</span></a>
              </div>
            </div>
            <div class="navbar-item has-dropdown is-hoverable">
              <a class="navbar-link">
                  <span class="icon">
                    <i class="fa fa-archive"></i>
                  </span>
                  <span>Archive</span>
              </a>
              <div class="navbar-dropdown">
                <a href="https://legacy.vitraag.com" class="navbar-item" target="_blank">       
                  <span class="icon">
                    <i class="fa fa-world"></i>
                  </span>
                  <span>Old Website&nbsp;</span>
                  <span class="tag is-primary">2001</span>
                </a>
              </div>
            </div>

            <a class="navbar-item" href="https://www.vitraag.com/#resume">
              <span class="icon">
                <i class="fas fa-file-alt"></i>
              </span>
              <span>Resume</span>
            </a>
          </div>
        </div>
  </div>
</nav>



<!-- 2023-11-29: Disabling hero for now.
<section class="hero is-info is-medium is-bold">
  <div class="hero-body">
      <div class="container has-text-centered">
         <h1 class="title">Classifying Android Malware Applications with Machine Learning</h1> 
      </div>
  </div>
</section>
-->

<div class="container">
  <!-- START ARTICLE FEED -->
  <section class="articles">
      <div class="column is-8 is-offset-2">
          <!-- START ARTICLE -->
          <div class="card article">
              <div class="card-content">
                  <div class="media">
                      <div class="media-content has-text-centered">
                          <p class="title article-title">Classifying Android Malware Applications with Machine Learning</p>
                          <div class="tags has-addons level-item">
                              <span class="tag is-rounded is-info">Vaibhav Bhandari</span>
                              <span class="tag is-rounded">Wed Aug 16 01:26:02 2017</span>
                              <span class="tag is-rounded is-warning">ramblings</span>
                          </div>
                      </div>
                  </div>
                  <div class="content article-body">
                    <p><img src="https://cdn-images-1.medium.com/max/800/0*ooYhTXnfj61ib0UY." alt="" /></p>

<p>A graph summarizing the results</p>

<p><strong>Editor’s Note:</strong> It’s challenging to use machine learning. This article by Polina Khapikova, Akshatha Muralidhar, Muhammad Qureshi, and Willie Santos outlines their approach to use ML to classify Malware applications on Android.</p>

<h3 id="introduction">Introduction</h3>

<p>This week, our group approached the final part of our research project: implementing the machine learning algorithms we worked on <a href="https://medium.com/cyberdefenders/machine-learning-for-malware-analysis-fca336b7346">previously</a>, to classify Android malware. In this post, we will discuss the steps we took and the challenges we came across to modify our existing program to work with Android files. We also implemented data visualization at the end, in order to get a more pictorial view of the results we obtained.</p>

<h3 id="methods-and-challenges">Methods and Challenges</h3>

<p>First, we had to do some research about what apk files were. Similar to PE files, or .exe files for the Windows operating system, .apk is a file format used by the Android operating system to install and execute applications.</p>

<p>To build our dataset, we found clean apk files on sites like <a href="http://www.apkmirror.com/">apkmirror.com </a>and <a href="http://apk-dl.com/">apk-dl.com</a>. For our malicious files we used the github repository <a href="https://github.com/ashishb/android-malware">https://github.com/ashishb/android-malware</a>.</p>

<p>We identified several features of the files to use for the Machine Learning algorithms. Two features we considered using were the size of the file and its certificate. However, we later removed these features. The file size was evenly distributed between the malicious and non-malicious applications, so it did not help us with our classification. Likewise, we learned that Android requires a certificate for every application, so this also did not help the algorithms categorize the files.</p>

<p>Thus, the main features we used were the permissions that an application requests from the system. Android splits the app permissions into two categories — “normal” and “dangerous”. The normal category is made up of permissions that Android does not think pose a security risk — for example, whether or not the phone is connected to a wifi network. The dangerous category is made up of permissions that could pose a security risk, allowing the user’s privacy to be compromised, or their data to be accessed or modified. This category includes permissions such as using the phone’s camera, recording audio, or reading text messages. (The dangerous permissions are the one Android asks about when you download apps through the Play Store. For more information, you can go to this link: <a href="https://developer.android.com/guide/topics/permissions/requesting.html">https://developer.android.com/guide/topics/permissions/requesting.html</a>)</p>

<p>We used a github repository called <a href="https://github.com/tdoly/apk_parse">apk_parse</a>, that itself relied on the popular Android malware repository <a href="https://github.com/androguard/androguard">Androguard</a>, to extract features. However, most of the features we found were returned as strings, which was incompatible with the ML algorithms we are using. To avoid having to research and select new algorithms, we modified the majority of our features to be Binary: whether or not the specified permission is requested by the application. (The one exception to this is the file size, which was returned as an integer).</p>

<p>Another unexpected challenge that we faced was finding a solid source where we could download malicious apk files. The only site we were able to pull malicious files from was a github repository (mentioned earlier). As of right now, roughly 35% of our collected apk files are malicious and the rest are clean. We hope to find more malicious files but we will be working with the files that we have already collected up to this point.</p>

<p>Another problem was that we originally studied, and began writing in Python 3. However, the github repositories we found used Python 2, so we had to convert all of our code into Python 2 so the different files would be compatible.</p>

<h3 id="visualization">Visualization</h3>

<p>We used the matplotlib Python library to make a bar graph (shown below) so we could visualize how the features correlated to the maliciousness of the application. From the bar graph we derived from our python code, we can infer that the percentage of non-malicious files that required permissions were lesser than the percentage of malicious files that required permissions. This data makes sense theoretically, because malicious APK files will want more of the user information to use for compromising their privacy than non-malicious APK files.</p>

<p><img src="https://cdn-images-1.medium.com/max/800/0*2eU2uMyUpDsc5PVT." alt="" /></p>

<p>In order to dissect the permissions that the malicious and non-malicious APK files asked for, we created a table.</p>

<p><img src="https://vitraagblog.files.wordpress.com/2017/08/6b8c6-1g7hdahvt6eo2kjsgcm9c6w.png" alt="" /></p>

<p>Results</p>

<p>From the data in the table, we can notice that 93.75% of the malicious APK files want to read the user’s phone state. The read phone state permission, allows the app to read the user’s phone number and serial number. It can also detect when a call is active, and the number it is calling. You can see why this would be a good permission for malicious applications to gain access to your information.</p>

<h3 id="future-steps">Future Steps</h3>

<p>Since our internship is coming to an end, we are trying to wrap up our project this week. However, we are looking into ways to extend this project if a later opportunity presents itself.</p>

<p>One way would be to experiment with using different features. For example, what providers, receivers, services, and activities the app uses.</p>

<p>Another direction would be to use a framework such as Kivy to turn our program into an Android application. This could then be installed on a phone and work as an antivirus. It would use the machine learning techniques to correctly scan the android system, detect and remove the malware.</p>


                  </div>
              </div>
          </div>
      </div> 
</section>
<hr/>
<section>
<div class="container">
  <h3 class="title is-5">Related posts you may enjoy: </h3>
  <div class="columns">
  
  
  

 
  

   
    
    

    

    
  

   
    
    

    

    
  

   
    
    

    

    
  

   
    
    

    

    
  

   
    
    

    

    
  

   
    
    

    

    
  

   
    
    

    

    
  

   
    
    

    

    
  

   
    
    

    

    
  

   
    
    

    

    
  

   
    
    

    

    
  

   
    
    

    

    
  

   
    
    

    

    
  

   
    
    

    

    
  

   
    
    

    

    
  

   
    
    

    

    
  

   
    
    

    

    
  

   
    
    

    

    
  

   
    
    

    

    
  

   
    
    

    

    
  

   
    
    

    

    
  

   
    
    

    

    
  

   
    
    

    

    
  

   
    
    

    

    
  

   
    
    

    

    
  

   
    
    

    

    
  

   
    
    

    

    
  

   
    
    

    

    
  

   
    
    

    

    
  

   
    
    

    

    
  

   
    
    

    

    
  

   
    
    

    

    
  

   
    
    

    

    
  

   
    
    

    

    
  

   
    
    

    

    
  

   
    
    

    

    
  

   
    
    

    

    
  

   
    
    

    

    
  

   
    
    

    

    
  

   
    
    

    

    
  

   
    
    

    

    
  

   
    
    

    

    
  

   
    
    

    

    
  

   
    
    

    

    
  

   
    
    

    

    
  

   
    
    

    

    
  

   
    
    

    

    
  

   
    
    

    

    
  

   
    
    

    

    
  

   
    
    

    

    
  

   
    
    

    

    
  

   
    
    

    

    
  

   
    
    

    

    
  

   
    
    

    

    
  

   
    
    

    

    
  

   
    
    

    

    
  

   
    
    

    

    
  

   
    
    

    

    
  

   
    
    

    

    
  

   
    
    

    

    
  

   
    
    

    

    
  

   
    
    

    

    
  

   
    
    

    

    
  

   
    
    

    

    
  

   
    
    

    

    
  

   
    
    

    

    
  

   
    
    

    

    
  

   
    
    

    

    
  

   
    
    

    

    
  

   
    
    

    

    
  

   
    
    

    

    
  

   
    
    

    

    
  

   
    
    

    

    
  

   
    
    

    

    
  

   
    
    

    

    
  

   
    
    

    

    
  

   
    
    

    

    
  

   
    
    

    

    
        <div class="column is-onethird">
          <a href="/2018/07/24/all-about-japan/">
              <div class="rel">
                  <h5>All About Japan</h5>
              </div>
          </a>
        </div>
      
      
    
  

   
    
    

    

    
        <div class="column is-onethird">
          <a href="/2018/06/21/introducing-cyberdefenders-2018-summer-program/">
              <div class="rel">
                  <h5>Introducing CyberDefenders 2018 Summer Program!</h5>
              </div>
          </a>
        </div>
      
      
    
  

   
    
    

    

    
        <div class="column is-onethird">
          <a href="/2018/05/22/twofer-we-are-hiring-announcing-our-summer-program/">
              <div class="rel">
                  <h5>Twofer — We are hiring & Announcing our summer program!</h5>
              </div>
          </a>
        </div>
      
      
        
</div>
</div>
</section>


<hr/>
<footer class="footer">
    <div class="section-heading">
      <p>
        <a href="https://www.twitter.com/vaibhavb"><i class="fab fa-twitter-square fa-2x"></i></a> 
        <a href="https://www.github.com/vaibhavb"><i class="fab fa-github fa-2x"></i></a>
        <a href="https://www.linkedin.com/in/vaibhavb"><i class="fab fa-linkedin fa-2x"></i></a>
        <a href="http://legacy.vitraag.com/cse/index.html"><i class="fas fa-globe fa-2x"></i></a>
        <br/><strong>&copy; 2023 Vaibhav Bhandari</strong>
        <br/><span class="credit">Last Updated on Wed Aug 21 22:35:12 2024</span>
      </p>
    </div>
</footer>
<script async src="https://www.vitraag.com//assets/js/main.js"></script>
<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-MQQHR1JXTN"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-MQQHR1JXTN');
</script>
</body>
</html>
